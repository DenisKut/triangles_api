## Серверная часть проекта `triangles`

### _Вычислительная часть для курсового проекта_

## Требования

Необходима установка стабильной LTS версии node.js + npm и yarn для запуска:

- [Node.js](https://nodejs.org/) - последняя версия ^20
- [npm](https://www.npmjs.com/) - версия ^10
- [yarn](https://classic.yarnpkg.com/lang/en/docs/install/#windows-stable) - версия ^1.22.22

ПРИМЕЧАНИЕ:
_**Установить `node.js` + `npm` можно при помощи [nvm](https://dev.to/skaytech/how-to-install-node-version-manager-nvm-for-windows-10-4nbi?ysclid=m4dykqasp221873997)**_

## Пошаговая инструкция по установке проекта:

1. Клонируйте репозиторий: `git clone https://github.com/DenisKut/triangles_api.git`
2. Перейдите в директорию проекта: `cd ваш-репозиторий`
3. Установите зависимости: `yarn install`
4. Создайте в корне проекта .env файл с переменными:
   - NODE_ENV: Переменная окружения, указывающая на режим работы вашего приложения (debug: Значение переменной. В данном случае, это указывает на режим отладки);
   - IP_BASIC_OCTETS: Переменная, указывающая базовую часть диапазона IP-адресов, которые будут сканироваться;
   - KNOWN_IPS: Переменная, содержащая список известных IP-адресов;
   - UDP_PORTS: Переменная, содержащая список UDP-портов, которые будут использоваться для связи;
   - NEST_PORT: Переменная, указывающая порт, на котором будет работать ваш NestJS сервер;
   - UDP_HOSTS: Переменная, содержащая список IP-адресов UDP-хостов, к которым будет отправляться сообщение
   - UDP_PORT: Переменная, указывающая на UDP-порт, который будет использоваться для связи

**Далее производим запуск стандартными командами через npm:**

1. `yarn run start:dev` - сборка и запуск в режиме разработки
2. `yarn run build` - сборка проекта в директорию "_dist_"
3. `yarn run start` - запуск собранного проекта

### Открытие приложения происходит по ссылке:

http://localhost:3000/

## Структура проекта

```/
|-- cluster-node/.................... # Директория с запускаемым
|   |                                   udp-кластером
|   |-- Dockerfile................... # Файл для запуска кластера в
|   |                                   docker-контейнере
|   |-- udp-task-processor.js........ # Сам кластер
|   |__
|-- dist/............................ # Директория, хранящая итоговую сборку
|-- node_modules/.................... # Каталог со всеми используемыми модулями
|                                       для node.js
|-- src/............................. # Основная директория с исполняемыми
|   |                                   модулями
|   |-- clusters/.................... # Подкаталог с основным модулем,
|   |   |                               работающим с кластерами
|   |   |-- clusters.contoller.ts.... # Контроллер, отвечающий за обращение к
|   |   |                               методам обработки запросов для
|   |   |                               вычислений
|   |   |-- clusters.gateway.ts...... # Класс, отвечающий за "подписку" на
|   |   |                               сообщения по WebSocket
|   |   |-- clusters.module.ts....... # Файл экспортирующий функциональность
|   |   |                               взаимодействия с кластерами в отдельный
|   |   |                               модуль
|   |   |-- clusters.service.ts...... # Класс, описывающий методы и логику
|   |   |__                             работы с кластерами
|   |-- app.controller.ts............ # Основной контроллер приложения для
|   |                                   распределения путей обращения к сервисам
|   |-- app.module.ts................ # Основной модуль приложения (импортирует
|   |                                   все необходимые микросервисы приложения)
|   |-- app.service.ts............... # Основной сервис, который обрабатывает
|   |                                   базовый путь к корню приложения
|   |-- main.ts...................... # Точка входа для приложения
|   |__
|-- test-client/..................... # Каталог для консольного клиента (тест)
|   |-- client.js.................... # Запускаемый node.js клиент
|   |-- points.json.................. # Файл с точками трёхмерного пространства
|   |__
|-- docker-compose.yml............... # Файл для сборки образов в Docker-е
|-- * ............................. # Файлы конфигурации сборки, настройки и т.д
|___
```
